<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three-Phase Electrical System Visualization</title>
    <script src="d3.v7.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<div id="main-container">
		<div id="first-row">
			<div id="input-fields1">
			</div>
			<div id="visualization">
				<!-- Place your SVG here -->
			</div>
			<div id="input-fields">
			</div>
		</div>
	</div>	
	<div class="flash">Hover to flash</div>
	<script>
		// Define dimensions and configurations
		var visualizationElement = d3.select("#visualization");

		const margin = {top: 20, right: 20, bottom: 20, left: 20};
		const boundingRect = document.getElementsByTagName("body");
		const svgWidth = visualizationElement._groups[0][0].clientWidth;
		const svgHeight = visualizationElement._groups[0][0].clientHeight;
		const arrowSize = 8;
		const colors = {A: 'red', B: 'gold', C: 'blue',Z0: "darkgrey",Z1: "limegreen",Z2: "magenta"};
		console.log("w,h",svgWidth,svgHeight);
		// Create SVG and group elements
		var svg = visualizationElement.append("svg")
			.attr("width", svgWidth + margin.left + margin.right)
			.attr("height", svgHeight + margin.top + margin.bottom)
			.attr("id","svgMainVisual")
			.style("overflow", "visible");

		const mainGroup = svg.append('g')
			.attr('transform', `translate(${margin.left}, ${margin.top})`)
			.attr("id","gMainVisual");

		// Define the aspect ratio of the SVG element
		const aspectRatio = 1;

		// Set the viewBox attribute to maintain aspect ratio
		// svg.attr('viewBox', `0 0 ${svgWidth} ${svgWidth / aspectRatio}`);


		// Create scales
		var xScale = d3.scaleLinear().domain([-3, 3]).range([0, svgWidth / aspectRatio ]);
		var yScale = d3.scaleLinear().domain([-3, 3]).range([svgWidth ,0]);

		// Add axes and gridlines
		var xAxis = d3.axisBottom(xScale);
		var yAxis = d3.axisLeft(yScale);

		mainGroup.append("g")
		.attr("transform", "translate(" + margin.left + "," + svgWidth/2 + ")")
		.call(xAxis);

		mainGroup.append("g")
		.attr("transform", "translate(" + svgWidth / (2*aspectRatio) + "," + margin.top + ")")
		.call(yAxis);		

		// Create vector data
		var vectorsData = {
			VA: {x: 2, y: 0},
			VB: {x: -1, y: -Math.sqrt(3)},
			VC: {x: -1, y: +Math.sqrt(3)},
			IA: {x: 1, y: 0},
			IB: {x: -0.5, y: -0.8660254037844386},
			IC: {x: -0.5, y: +0.8660254037844386},
			ZA: {x: 2, y: 0},
			ZB: {x: 2, y: 0},
			ZC: {x: 2, y:0},
			I0: {x: 0, y: 0},
			I1: {x: 1, y: 0},
			I2: {x: 0, y: 0},
			V0: {x: 0, y: 0},
			V1: {x: 3, y: 0},
			V2: {x: 3, y: 0},
			Z0: {x: 0, y: 0},
			Z1: {x: 3, y: 0},
			Z2: {x: 0, y: 0},
		};

	</script>
    <script type="module" src="index.js"></script>
</body>
</html>
